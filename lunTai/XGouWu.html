<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="xingouwu/XGouWu.css"/>
		<link rel="stylesheet" type="text/css"href="NEW-API/bootstrap/css/bootstrap.min.css"/>	
		<script src="NEW-API/jquery-3.1.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="NEW-API/bootstrap/js/bootstrap.min.js"></script>
		<style type="text/css">
			.oid{
				display: none;
			}
		</style>
	</head>
	<body>
		<div class="logo">
			<div class="nav">
				<a>LOGO</a>
				<a href="index.html">HOME</a>
				<a>PRODUCTS</a>
				<a href="about.html">ABOUT US</a>
				<a href="LM110.html">CONTACT</a>
				<a href="history.html">REGISTER I SING IN</a>
				<a style="position: absolute;">Log Out</a>
			</div>
		</div>
		
		<div class="div1">
			<img src="xingouwu/img/首页-产品介绍_02.jpg" style="width:100%;"/>
		</div>
		
		<div class="tot">
			<p class="p">Your location: Home > <span>Products</span></p>
		</div>
		
		<div class="cont">
			<div class="sele1">
				<div class="btn-group">
				  	<button class="btn btn-default btn-lg dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="width:2rem;">
				    Select Options <span class="caret"></span>
				    </button>
				  	<ul class="dropdown-menu xl">
				    	<li>Slelect...</li>
				    	<li>Product Cody</li>
				    	<li>Brand</li>
				    	<li>Category</li>
				    	<li>Size</li>
				    	<li>Description</li>
				 	</ul>
				</div>
			</div>
			<div class="sele2">
				<span class="sp-sele">Sort by:</span>
				<div class="btn-group">
				  	<button class="btn btn-default btn-lg dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="width:2rem";>
				    Large button <span class="caret"></span>
				    </button>
				  	<ul class="dropdown-menu xl">
				    	<li>Slelect...</li>
				    	<li>Product Cody</li>
				    	<li>Brand</li>
				    	<li>Category</li>
				    	<li>Size</li>
				    	<li>Description</li>
				 	</ul>
				</div>
			</div>
			<div class="sou">
				<div><img src="xingouwu/img/Search.png" id="searsh"/></div>
				<div><input type="text" style="position: absolute;width: 1.1rem;border: none;" placeholder="Search here..." id="tet"/></div>
				<div class="clear"></div>
			</div>
			<div class="clear"></div>	
			
			<div class="bg">
				<table class="table">
					<thead>
						<tr class="tiao">
							<td>Descript</td>
							<td>Your price Inc GST</td>
							<td>Stock Qty</td>
							<td>Add-Qty</td>
							<td>Add ALL</td>
							<td>Qty In Cart</td>
						</tr>
					</thead>
					<tbody>
						
					</tbody>
					<!--<tr>
						<td style="400px">ACH 10R20 146/143K H/DUTY 12</td>
						<td>$1.10</td>
						<td>Call</td>
						<td><input type="number" style="width: 50px;" value="0" min="0"></td>
						<td>
							<button type="button" class="btn btn-warning" style="width: 70px;">Add</button>
						</td>
						<td><span>0</span></td>
					</tr>
					<tr class="active">
						<td>ACH 10R20 146/143K H/DUTY 12</td>
						<td>$1.10</td>
						<td>Call</td>
						<td><input type="number" style="width: 50px;" value="0" min="0"></td>
						<td>
							<button type="button" class="btn btn-warning" style="width: 70px;">Add</button>
						</td>
						<td><span>0</span></td>
					</tr>
					<tr>
						<td>ACH 10R20 146/143K H/DUTY 12</td>
						<td>$1.10</td>
						<td>Call</td>
						<td><input type="number" style="width: 50px;" value="0" min="0"></td>
						<td>
							<button type="button" class="btn btn-warning" style="width: 70px;">Add</button>
						</td>
						<td><span>0</span></td>
					</tr>
					<tr class="active">
						<td>ACH 10R20 146/143K H/DUTY 12</td>
						<td>$1.10</td>
						<td>Call</td>
						<td><input type="number" style="width: 50px;" value="0" min="0"></td>
						<td>
							<button type="button" class="btn btn-warning" style="width: 70px;">Add</button>
						</td>
						<td><span>0</span></td>
					</tr>
					<tr>
						<td>ACH 10R20 146/143K H/DUTY 12</td>
						<td>$1.10</td>
						<td>Call</td>
						<td><input type="number" style="width: 50px;" value="0" min="0"></td>
						<td>
							<button type="button" class="btn btn-warning" style="width: 70px;">Add</button>
						</td>
						<td><span>0</span></td>
					</tr>
					<tr class="active">
						<td>ACH 10R20 146/143K H/DUTY 12</td>
						<td>$1.10</td>
						<td>Call</td>
						<td><input type="number" style="width: 50px;" value="0" min="0"/ ></td>
						<td>
							<button type="button" class="btn btn-warning" style="width: 70px;">Add</button>
						</td>
						<td><span>0</span></td>
					</tr>
					<tr>
						<td>ACH 10R20 146/143K H/DUTY 12</td>
						<td>$1.10</td>
						<td>Call</td>
						<td><input type="number" style="width: 50px;" value="0" min="0"/ ></td>
						<td>
							<button type="button" class="btn btn-warning" style="width: 70px;">Add</button>
						</td>
						<td><span>0</span></td>
					</tr>-->
				</table>
			</div>
			
			<div class="prev">
				<ul>
					<li>
						<button type="button" class="btn btn-primary ofirst" data-toggle="button" aria-pressed="false" autocomplete="off" style="background:#404043;border: none;">
						 《First
						</button>
					</li>
					<li>
						<button type="button" class="btn btn-primary oprev" data-toggle="button" aria-pressed="false" autocomplete="off" style="background: #404043;border: none;">
						 《
						</button>
					</li>
					<li>
						<button type="button" class="btn btn-primary but" data-toggle="button" aria-pressed="false" autocomplete="off" style="background: #404043;border: none;">
						 1
						</button>
					</li>
					<li>
						<button type="button" class="btn btn-primary but" data-toggle="button" aria-pressed="false" autocomplete="off" style="background: #404043;border: none;">
						 2
						</button>
					</li>
					<li>
						<button type="button" class="btn btn-primary but" data-toggle="button" aria-pressed="false" autocomplete="off" style="background: #404043;border: none;">
						 3
						</button>
					</li>
					<li>
						<button type="button" class="btn btn-primary but" data-toggle="button" aria-pressed="false" autocomplete="off" style="background: #404043;border: none;">
						 8
						</button>
					</li>
					<li>
						<button type="button" class="btn btn-primary but" data-toggle="button" aria-pressed="false" autocomplete="off" style="background: #404043;border: none;">
						 9
						</button>
					</li>
					<li>
						<button type="button" class="btn btn-primary next" data-toggle="button" aria-pressed="false" autocomplete="off" style="background: #404043;border: none;">
						 》
						</button>
					</li>
					<li>
						<button type="button" class="btn btn-primary olast" data-toggle="button" aria-pressed="false" autocomplete="off" style="background: #404043;border: none;">
						 Last》
						</button>
					</li>
					<div class="clear"></div>
				</ul>
				<div class="clear"></div>
			</div>
		</div>	
		
		<div class="foot">
			&copy;SpiderGT Longmarch Tyre &copy;2017.All Rights Reserved
		</div>
	</body>
	<script>
		document.documentElement.style.fontSize = innerWidth / 16 + "px";
		console.log("1rem=" + innerWidth / 16)
		onresize = function() {
			document.documentElement.style.fontSize = innerWidth / 16 + "px";
		}
		if (localStorage.getItem("hasuser")) {
			$(".nav a:nth-child(6)").html("<span class='glyphicon glyphicon-user'></span>")
		}
		$(".nav a:last-child").click(function(){
			localStorage.clear()
			location.replace("./login.html")
		})
		$(".aa").click(function(){
			location.replace("login.html")
		})
		$(".bb").click(function(){
			location.replace("../index.html")
		})
		$(".cc").click(function(){
			location.replace("XGouWu.html")
		})
		$(".dd").click(function(){
			location.replace("about.html")
		})
		$(".ee").click(function(){
			location.replace("LM110.html")
		})
		$.ajax({
			type:"get",
			url:"http://172.16.129.67:8888/luntai/php/index.php?C=Login&M=product_find",
			async:true,
			dataType:"json",
			success:function(con){
				window.serData=con.data
				console.log(con.data[0])
				if (con.code==200) {
					var data=con.data
					window.content=data
					var data1=[]
					var c=0
					$("#tet").on("keyup",function(){
						data=con.data
						data1=[]
						$(data).each(function(i,ele){
							c=0
							for(var a in ele){
								if(ele[a].indexOf($("#tet").val())!=-1){
									c=1
								}
							}
							if (c==1) {
								data1.push(ele)
							}
						})
						data=data1
						$(".table tbody").empty()
//						if ($("#tet").val()=="") {
//							data=con.data
//							console.log(data)
//						}
						$(data).each(function(i,ele){
							if (i<7) {
								var str=`<tr>
											<td>${ele.brand} ${ele.size} ${ele.pattern} ${ele.ply} ${ele.loading_index} ${ele.loading_index} ${ele.speed_rating} ${ele.tread_depth}</td>
											<td>$${ele.price}</td>
											<td>${ele.qty}</td>
											<td><span class='oid'>${ele.product_id}</span><input type="number" style="width: 50px;" value="0" min="0"/ ></td>
											<td>
												<button type="button" class="btn btn-warning" style="width: 70px;">Add</button>
											</td>
											<td><span>0</span></td>
										</tr>`
								$(".table").append(str)
						}
						})
					})
					
					var num=0
					$(data).each(function(i,ele){
						if (i<7) {
								var str=`<tr>
											<td>${ele.brand} ${ele.size} ${ele.pattern} ${ele.ply} ${ele.loading_index} ${ele.loading_index} ${ele.speed_rating} ${ele.tread_depth}</td>
											<td>$${ele.price}</td>
											<td>${ele.qty}</td>
											<td><span class='oid'>${ele.product_id}</span><input type="number" style="width: 50px;" value="0" min="0"/ ></td>
											<td>
												<button type="button" class="btn btn-warning" style="width: 70px;">Add</button>
											</td>
											<td><span>0</span></td>
										</tr>`
								$(".table").append(str)
						}
					})
					//下一页
					$(".next").on("click",function(){
//						console.log(data)
//						console.log(num)
						if (num<data.length) {
							num+=7
							if (num<data.length) {
								$(".table tbody").empty()
							}
							$(data).each(function(i,ele){
								if (i>=num&&i<num+7) {
									var str=`<tr>
												<td>${ele.brand} ${ele.size} ${ele.pattern} ${ele.ply} ${ele.loading_index} ${ele.loading_index} ${ele.speed_rating} ${ele.tread_depth}</td>
												<td>$${ele.price}</td>
												<td>${ele.qty}</td>
												<td><span class='oid'>${ele.product_id}</span><input type="number" style="width: 50px;" value="0" min="0"/ ></td>
												<td>
													<button type="button" class="btn btn-warning" style="width: 70px;">Add</button>
												</td>
												<td><span>0</span></td>
											</tr>`
									$(".table").append(str)
								}
							})
						}
					})
					//上一页
					$(".oprev").on("click",function(){
						console.log(num)
						if (num>0) {
							num-=7
							$(".table tbody").empty()
							$(data).each(function(i,ele){
								if (i>=num&&i<num+7) {
									var str=`<tr>
												<td>${ele.brand} ${ele.size} ${ele.pattern} ${ele.ply} ${ele.loading_index} ${ele.loading_index} ${ele.speed_rating} ${ele.tread_depth}</td>
												<td>$${ele.price}</td>
												<td>${ele.qty}</td>
												<td><span class='oid'>${ele.product_id}</span><input type="number" style="width: 50px;" value="0" min="0"/ ></td>
												<td>
													<button type="button" class="btn btn-warning" style="width: 70px;">Add</button>
												</td>
												<td><span>0</span></td>
											</tr>`
									$(".table").append(str)
								}
							})
						}
					})
					//最后一页	
					$(".olast").on("click",function(){
						console.log(num)
						if (num<data.length) {
							num=data.length-7
							$(".table tbody").empty()
							$(data).each(function(i,ele){
								if (i>=num&&i<num+7) {
									var str=`<tr>
												<td>${ele.brand} ${ele.size} ${ele.pattern} ${ele.ply} ${ele.loading_index} ${ele.loading_index} ${ele.speed_rating} ${ele.tread_depth}</td>
												<td>$${ele.price}</td>
												<td>${ele.qty}</td>
												<td><span class='oid'>${ele.product_id}</span><input type="number" style="width: 50px;" value="0" min="0"/ ></td>
												<td>
													<button type="button" class="btn btn-warning" style="width: 70px;">Add</button>
												</td>
												<td><span>0</span></td>
											</tr>`
									$(".table").append(str)
								}
							})
						}
					})
					//第一页
					$(".ofirst").on("click",function(){
						console.log(num)
						if (num<data.length) {
							num=0
							$(".table tbody").empty()
							$(data).each(function(i,ele){
								if (i>=num&&i<num+7) {
									var str=`<tr>
												<td>${ele.brand} ${ele.size} ${ele.pattern} ${ele.ply} ${ele.loading_index} ${ele.loading_index} ${ele.speed_rating} ${ele.tread_depth}</td>
												<td>$${ele.price}</td>
												<td>${ele.qty}</td>
												<td><span class='oid'>${ele.product_id}</span><input type="number" style="width: 50px;" value="0" min="0"/ ></td>
												<td>
													<button type="button" class="btn btn-warning" style="width: 70px;">Add</button>
												</td>
												<td><span>0</span></td>
											</tr>`
									$(".table").append(str)
								}
							})
						}
					})
					//点击tab切换
					$(".btn-primary").on("mousedown",function(){
						$(this).css("background","#F8C53A")
					})
					$(".btn-primary").on("mouseup",function(){
						$(".btn-primary").css("background","#404043")
					})
					//数字点击
					$(".but").on("click",function(){
						$(".but").css("background","#404043")
						num=Number($(this).html())*7
						if (num<data.length) {
							var _this=$(this)
							console.log(_this.html())
							var _this1=_this.html()
							var ber=Number(_this.html())
							if (ber>=3) {
								var ber=ber-3
							}
							$(".but").each(function(i,ele){
								if (i<3) {
									$(ele).html(ber++)
								}else{
									$(ele).html(ber++)
								}
								if ($(ele).html()==_this1) {
									$(ele).css("background","#F8C53A")
								}
							})
//							console.log(num)
							$(".table tbody").empty()
							$(data).each(function(i,ele){
								if (i>=num&&i<num+7) {
									var str=`<tr>
												<td>${ele.brand} ${ele.size} ${ele.pattern} ${ele.ply} ${ele.loading_index} ${ele.loading_index} ${ele.speed_rating} ${ele.tread_depth}</td>
												<td>$${ele.price}</td>
												<td>${ele.qty}</td>
												<td><span class='oid'>${ele.product_id}</span><input type="number" style="width: 50px;" value="0" min="0"/ ></td>
												<td>
													<button type="button" class="btn btn-warning" style="width: 70px;">Add</button>
												</td>
												<td><span>0</span></td>
											</tr>`
									$(".table").append(str)
								}
							})
						}
					})
							
				}
			}
		});
		localStorage.setItem("arr","[]")
		$("table").on("click",".btn-warning",function(){
			var arr=$.parseJSON(localStorage.getItem("arr"))
//			console.log($.parseJSON(localStorage.getItem("arr")))
			if ($(this).parent().prev().find("input").val()!=0) {
				var _this=$(this)
				$.each(serData, function(i,ele) {
					if (_this.parent().prev().find("span").html()==ele.product_id) {
						ele.count=_this.parent().prev().find("input").val()
						arr.push(ele)
					}
				});
				$(this).parent().next().html($(this).parent().prev().find("input").val())
				localStorage.setItem("arr",JSON.stringify(arr))
//				console.log(serData)
			}
			
		})
	</script>
</html>
